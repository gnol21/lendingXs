$(document).ready((function(){let t="https://iptv.givethanksgrocers.com/lending/cashflow.php";var e=0;function n(){$.ajax({url:t,type:"GET",success:function(t){var n=$("#table-body");n.empty(),t.forEach((function(t){var a;e++,n.append(`\n                        <tr>\n                            <td>${e}</td>\n                            <td>${t.Date}</td>\n                            <td>${t.Type}</td>\n                            <td>â‚±${a=t.Amount,a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}</td>\n                            <td class="text-center text-capitalize">${t.Description}</td>\n                            <td><button class="btn btn-danger btn-sm delete-btn" data-id="${t.TransactionID}" type="button" style="width: 100%;">Delete</button></td>\n                        </tr>\n                    `)})),n.append(`<tr>\n    <td style="width: 5%;" contenteditable="false">${e+1}</td>\n    <td class="text-capitalize" style="width: 15%;"><input id="cashflow-date" class="border-0" type="date" style="width: 100%;" /></td>\n    <td class="text-capitalize" style="width: 15%;"><select id="cashflow-type" class="border-0" style="width: 100%;">\n            <option value="Cash In">Cash In</option>\n            <option value="Cash Out">Cash Out</option>\n        </select></td>\n    <td id="cashflow-amount" style="width: 10%;" contenteditable="true"></td>\n    <td id="cashflow-description" class="text-capitalize text-center" contenteditable="true"></td>\n    <td style="width: 10%;"><button id="add-cashflow-btn" class="btn btn-primary btn-sm add-btn" type="button" style="width: 100%;">Add</button></td>\n</tr>`)},error:function(t,e,n){console.error("Error:",n),alert("Failed to load borrowers. Please try again.")}}),e=0}n(),$("#table-body").on("click",".add-btn",(function(){let e={date:$("#cashflow-date").val(),type:$("#cashflow-type").val(),amount:parseFloat($("#cashflow-amount").text()),description:$("#cashflow-description").text()};!e.date||isNaN(e.amount)||e.amount<=0?alert("Please provide valid inputs"):$.ajax({url:t,type:"POST",data:JSON.stringify(e),contentType:"application/json",success:function(t){$("#table-body");alert("Cash flow entry added successfully"),n()},error:function(t,e,n){alert("Error: "+t.responseJSON.message)}})})),$("#table-body").on("click",".delete-btn",(function(){var t=$(this).data("id");$.ajax({url:`https://iptv.givethanksgrocers.com/lending/cashflow.php?id=${t}`,type:"DELETE",success:function(t){alert("Cash flow entry deleted successfully"),n()},error:function(t,e,n){alert("Error: "+t.responseJSON.message)}})}))}));