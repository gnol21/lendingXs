$(document).ready((function(){let t="https://iptv.givethanksgrocers.com/lending/borrower.php";var e=0;function r(t){t?($("#loading-spinner").show(),$("button").prop("disabled",!0)):($("#loading-spinner").hide(),$("button").prop("disabled",!1))}function a(){r(!0),$.ajax({url:t,type:"GET",success:function(t){var a=$("#table-body");a.empty(),t.forEach((function(t){e++,a.append(`<tr>\n                            <td class="d-none">${t.BorrowerID}</td>\n                             <td>${e}</td>\n                            <td class="text-capitalize">${t.Name}</td>\n                            <td class="text-capitalize">${t.Address}</td>\n                            <td class="text-capitalize">${t.Phone}</td>\n                            <td class="text-center">\n                                <button class="btn btn-warning btn-sm edit-btn d-none" data-toggle="modal" data-target="#edit-modal" data-id="${t.BorrowerID}">Edit</button>\n                                <button class="btn btn-danger btn-sm delete-btn" data-id="${t.BorrowerID}" style="width: 100%;">Delete</button>\n                            </td>\n                        </tr>`),r(!1)})),a.append(`<tr>\n<td contenteditable="false">${e+1}</td>\n<td class="text-capitalize" contenteditable="true"></td>\n<td class="text-capitalize" contenteditable="true"></td>\n<td contenteditable="true"></td>\n<td class="text-center"><button class="btn btn-primary btn-sm add-btn" type="button" style="width: 100%;">Add</button></td>\n</tr>`)},error:function(t,e,a){r(!1),console.error("Error:",a),alert("Failed to load borrowers. Please try again.")}}),e=0}a(),$("#table-body").on("click",".add-btn",(function(){var e=$(this).closest("tr"),n={name:e.find("td").eq(1).text().trim(),phone:e.find("td").eq(3).text().trim(),address:e.find("td").eq(2).text().trim()};n.name&&n.phone&&n.address?(r(!0),$.ajax({url:t,type:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(t){alert(t.message),console.log("Success:",t),a()},error:function(t,e,a){r(!1),console.error("Error:",a),alert("Failed to add borrower. Please try again.")}})):(r(!1),alert("Please fill in all fields."))})),$("#table-body").on("click",".edit-btn",(function(){var t=$(this).data("id");$.ajax({url:`https://iptv.givethanksgrocers.com/lending/borrower.php?id=${t}`,type:"GET",success:function(t){$("#edit-name").val(t.Name),$("#edit-phone").val(t.Phone),$("#edit-address").val(t.Address),$("#update-id").val(t.BorrowerID),$("#edit-modal").modal("show")},error:function(t,e,r){console.error("Error:",r),alert("Failed to load borrower details. Please try again.")}})})),$("#update-borrower").on("click",(function(){var t={name:$("#edit-name").val().trim(),phone:$("#edit-phone").val().trim(),address:$("#edit-address").val().trim()},e=$("#update-id").val();t.name&&t.phone&&t.address?$.ajax({url:`/path/to/borrowers.php?id=${e}`,type:"PUT",contentType:"application/json",data:JSON.stringify(t),success:function(t){alert(t.message),$("#edit-modal").modal("hide"),a()},error:function(t,e,r){console.error("Error:",r),alert("Failed to update borrower. Please try again.")}}):alert("Please fill in all fields.")})),$("#table-body").on("click",".delete-btn",(function(){var t=$(this).data("id");confirm("Are you sure you want to delete this borrower?")&&(r(!0),$.ajax({url:`https://iptv.givethanksgrocers.com/lending/borrower.php?id=${t}`,type:"DELETE",success:function(t){alert(t.message),a(),r(!1)},error:function(t,e,a){r(!1),console.error("Error:",a),alert("Failed to delete borrower. Please try again.")}}))}))}));